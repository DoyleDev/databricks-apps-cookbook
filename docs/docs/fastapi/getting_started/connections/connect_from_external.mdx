---
sidebar_position: 3
---

# Connect External App to Databricks App

This recipe demonstrates how to connect your external application to a deployed Databricks App.

:::info

This connection methodology is regarded as Machine-to-Machine (M2M) and customers are generally advised to use a Databricks [Service Principal](https://docs.databricks.com/aws/en/dev-tools/auth/oauth-m2m) as per security best practices.

:::


## Code snippet

The example below requires a valid databricks workspace host, client id, and client secret.  

Alternatively, they can be provided as environment variables `DATABRICKS_HOST`, `DATABRICKS_CLIENT_ID`, and `DATABRICKS_CLIENT_SECRET` respectively without needing to be used within `WorkspaceClient()`.

```python
from databricks.sdk import WorkspaceClient
import requests

wc = WorkspaceClient(
    host="https://<DATABRICKS_HOST>",
    client_id="<DATABRICKS_CLIENT_ID>",
    client_secret="<DATABRICKS_CLIENT_SECRET>"
) 
headers = wc.config.authenticate() # Contains Bearer Token

response = requests.get(
    "https://your-app-url/api/v1/healthcheck", headers=headers
)
print(response.json())
```

## Permissions

For external app connectivity and authentication, the connecting [service principal](https://docs.databricks.com/aws/en/dev-tools/databricks-apps/#how-does-databricks-apps-manage-authorization) needs the following permissions:

- `CAN USE` on the target app

## Dependencies

- [Databricks SDK for Python](https://pypi.org/project/databricks-sdk/) - `databricks-sdk`
- [Requests](https://pypi.org/project/requests/) - `requests`


```python title="requirements.txt"
databricks-sdk
requests
``` 